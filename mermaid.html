<html>
    <head>
    <title>Mermaid Demo</title>
    </head>
    <body>

        <textarea id="graphtext"></textarea><br/>
        <button id="makegraph">Graph!</button><br/>
        <button id="framesmall">-</button><button id="framebig">+</button><br/>
        <iframe style="width:300px;height:300px;" id="graphtarget"></iframe><br/>

        <script type="text/javascript">
          document.body.onload = function() {
            if (Object.keys(localStorage).indexOf('mermaid_graph') > -1) {
              document.getElementById('graphtext').value = localStorage.mermaid_graph;
              document.getElementById('makegraph').click();
            }
          };
          
          document.getElementById('makegraph').onclick = function() {
            document.getElementById('graphtarget').src = "data:text/html;charset=utf-8," + escape('<html><head><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"><\/script><script type="text/javascript">mermaid.initialize({ startOnLoad: true });<\/script><\/head><body><div class="mermaid">' + document.getElementById('graphtext').value + '<\/div></body></html>');
            localStorage.mermaid_graph = document.getElementById('graphtext').value;
          };
          
          document.getElementById('framesmall').onclick = function() {
            document.getElementById('graphtarget').style.width = (parseInt(document.getElementById('graphtarget').style.width) - 25).toString() + 'px';
            document.getElementById('graphtarget').style.height = (parseInt(document.getElementById('graphtarget').style.height) - 25).toString() + 'px';
          };
          
          document.getElementById('framebig').onclick = function() {
            document.getElementById('graphtarget').style.width = (parseInt(document.getElementById('graphtarget').style.width) + 25).toString() + 'px';
            document.getElementById('graphtarget').style.height = (parseInt(document.getElementById('graphtarget').style.height) + 25).toString() + 'px';
          };
        </script>
    </body>
</html>
