<html>
<head>
<title>Notepad</title>
</head>
<body onLoad="loadText();">
<textarea style="width: 100%; height: 90%; box-sizing: border-box; font-family:courier" id="localnotepad" onchange="clearStatus();"></textarea><br/>
<input type="button" value="Save" onClick="saveText()" /><input type="button" value="Download" onClick="downloadText();" />&nbsp;&nbsp;<span id="statusbar"></span>
<script type="text/javascript">
  function loadText() {
    if (localStorage.localnotepad) {
      document.getElementById('localnotepad').value = localStorage.localnotepad;
    }
  }
  
  function saveText() {
    localStorage.localnotepad = document.getElementById('localnotepad').value;
    document.getElementById('statusbar').innerHTML = '<b>Notepad Saved</b>';
  }
  
  function clearStatus() {
    document.getElementById('statusbar').innerHTML = '';
  }
  
  function downloadText() {
    var textToWrite = document.getElementById("localnotepad").value;
    var textFileAsBlob = new Blob([textToWrite], { type: 'text/plain' });
    var fileNameToSaveAs = "localnotepad.txt";
    
    var downloadLink = document.createElement("a");
    downloadLink.download = fileNameToSaveAs;
    downloadLink.innerHTML = "My Hidden Link";
    
    window.URL = window.URL || window.webkitURL;
    
    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
    downloadLink.onclick = destroyClickedElement;
    downloadLink.style.display = "none";
    document.body.appendChild(downloadLink);
    
    downloadLink.click();
  }

  function destroyClickedElement(event) {
    document.body.removeChild(event.target);
    return false;
  }
</script>
</body>
